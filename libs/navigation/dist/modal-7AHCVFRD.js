import{c as x,f as h,h as r,i as $,k as v}from"./chunk-KHBABMXA.js";import"./chunk-YBWLHNHN.js";var A='a:not(.hide-video), button, input, textarea, select, details, [tabindex]:not([tabindex="-1"]',M=`<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
  <g transform="translate(-10500 3403)">
    <circle cx="10" cy="10" r="10" transform="translate(10500 -3403)" fill="#707070"/>
    <line y1="8" x2="8" transform="translate(10506 -3397)" fill="none" stroke="#fff" stroke-width="2"/>
    <line x1="8" y1="8" transform="translate(10506 -3397)" fill="none" stroke="#fff" stroke-width="2"/>
  </g>
</svg>`,E=!1,m="",b=new Set;function C(e,t){let a=e.replace("#",""),i=(t||document.querySelector(`a[data-modal-hash="${e}"]`))?.dataset.modalPath||$(x(`-${a}`));return{id:a,path:i,isHash:e===window.location.hash}}function k(e){let t={xdm:{},data:{web:{webInteraction:{name:e?.type}}}};e?.data&&(t.data._adobe_corpnew={digitalData:e.data}),window._satellite?.track("event",t)}function I(e){window._satellite?.track?k(e):window.addEventListener("alloy_sendEvent",()=>{k(e)},{once:!0})}function f(e){let{id:t}=e,a=new Event("milo:modal:closed");window.dispatchEvent(a),document.querySelectorAll(`#${t}`).forEach(i=>{if(i.classList.contains("dialog-modal")){let s=document.querySelector(`#${t}~.modal-curtain`);s&&s.remove(),i.remove()}document.querySelector(`[data-modal-hash="#${i.id}"]`)?.focus()}),document.querySelectorAll(".modal-curtain").length||document.body.classList.remove("disable-scroll"),[...document.querySelectorAll("header, main, footer")].forEach(i=>i.removeAttribute("aria-disabled")),window.location.hash.replace("#","")===e.id&&window.history.pushState("",document.title,`${window.location.pathname}${window.location.search}`),E=!1,m&&(window.location.hash=m,m="")}function H(e){let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function O(e,t){let{miloLibs:a,codeRoot:o}=h();v(`${a||o}/blocks/modal/modal.css`),e.id&&(t.id=e.id),e.class&&t.classList.add(e.class),e.closeEvent&&t.addEventListener(e.closeEvent,()=>{f(t)}),t.append(e.content)}async function R(e,t){let a=e;if(e.includes("/federal/")){let{getFederatedUrl:s}=await import("./federated-WHH22KS6.js");a=s(e)}let o=r("a",{href:a});t.append(o);let{default:i}=await import("./fragment-2FKKFKOO.js");await i(o)}async function q(e,t){if(!(e?.path||t))return null;let{id:a}=e||t;b.add(a);let o=r("div",{class:"dialog-modal",id:a}),i=new Event("milo:modal:loaded");if(t&&O(t,o),e&&await R(e.path,o),E){o.classList.add("delayed-modal");let n=o.querySelector("div.media");if(n){n.classList.add("in-modal");let{miloLibs:l,codeRoot:u}=h();v(`${l||u}/styles/rounded-corners.css`)}}let s=a?.includes("locale-modal")?"localeModal":"milo",L=window.location.hash?window.location.hash.replace("#",""):s,c=r("button",{class:"dialog-close","aria-label":"Close","daa-ll":`${L}:modalClose:buttonClose`},M),w={focusVisible:!0},p=[...o.querySelectorAll(A)],y=o.querySelector("h1, h2, h3, h4, h5"),d;if(p.length&&H(p[0])?d=p[0]:y?(y.setAttribute("tabIndex",0),d=y):d=c,o.addEventListener("keydown",n=>{let l=n.shiftKey,u=n.key==="Tab",S=document.activeElement===c;!l&&u&&S&&(n.preventDefault(),d.focus(w)),u&&l&&document.activeElement===d&&(n.preventDefault(),c.focus(w))}),c.addEventListener("click",n=>{f(o),n.preventDefault()}),o.addEventListener("keydown",n=>{n.key==="Escape"&&f(o)}),o.append(c),document.body.append(o),b.delete(a),d.focus({preventScroll:!0,...w}),window.dispatchEvent(i),!o.classList.contains("curtain-off")){document.body.classList.add("disable-scroll");let n=r("div",{class:"modal-curtain is-open","daa-ll":`${L}:modalClose:curtainClose`});n.addEventListener("click",l=>{l.target===n&&f(o)}),o.insertAdjacentElement("afterend",n),[...document.querySelectorAll("header, main, footer")].forEach(l=>l.setAttribute("aria-disabled","true"))}let g=o.querySelector("iframe");if(g)if(o.classList.contains("commerce-frame")){let{default:n}=await import("./modal.merch-WCIHPIXJ.js");await n({dialog:o,iframe:g})}else g.style.height="100%";return o}function U(e){return e?e.split(":").reduce((t,a)=>{if(a.startsWith("#"))t.hash=a;else{let[o,i]=a.split("=");o==="delay"&&(t.delay=parseInt(i,10)*1e3)}return t},{}):{}}function D(e){let{hash:t,delay:a}=U(e?.dataset.modalHash);if(a===void 0||!t)return!1;E=!0;let o=new Event(`${t}:modalOpen`),i=window.sessionStorage.getItem(`shown:${t}`);return e.dataset.modalHash=t,e.href=t,i?.includes(window.location.pathname)||setTimeout(()=>{window.location.replace(t),I(o),window.sessionStorage.setItem(`shown:${t}`,`${i||""} ${window.location.pathname}`)},a),!0}function F(e){let{modalHash:t,modalPath:a}=e.dataset;if(h().mep?.fragments?.[a]?.action==="remove"||D(e)||window.location.hash!==t||document.querySelector(`div.dialog-modal${t}`)||b.has(t?.replace("#","")))return null;let o=C(window.location.hash,e);return o?q(o):null}window.addEventListener("hashchange",e=>{if(window.location.hash){let t=C(window.location.hash,null);t&&q(t),e.oldURL?.includes("#")&&(m=new URL(e.oldURL).hash)}else try{let t=new URL(e.oldURL),a=document.querySelector(`.dialog-modal${t.hash}`);a&&f(a)}catch{}});export{M as CLOSE_ICON,f as closeModal,F as default,D as delayedModal,C as findDetails,U as getHashParams,q as getModal,I as sendAnalytics};
