import{D as R,E as F,d,e as m,g as i,h as C,i as x,j as p,k as S,n as A,o as T,p as q}from"./chunk-VLPXW364.js";import{a as v}from"./chunk-NY3PBGKK.js";import"./chunk-TXSFCJFB.js";import{b as P}from"./chunk-I5JF36TS.js";import{c as w,f,i as $,k as g,s as L,u as E,w as M}from"./chunk-VP5VJMKQ.js";import"./chunk-YBWLHNHN.js";var{miloLibs:G,codeRoot:H,locale:k,mep:N}=f(),b=G||H,I={socialPlatforms:["facebook","instagram","twitter","linkedin","pinterest","discord","behance","youtube","weibo","social-media"],delays:{decoration:3e3}},y=class{constructor({block:e}={}){this.block=e,this.elements={},this.init()}init=()=>m(async()=>{let e,o={rootMargin:"300px 0px"},s=new window.IntersectionObserver(r=>{r.find(a=>a.isIntersecting===!0)&&(clearTimeout(e),s.disconnect(),this.decorateContent())},o);s.observe(this.block),e=setTimeout(()=>{s.disconnect(),this.decorateContent()},I.delays.decoration)},"Error in global footer init","errorType=error,module=global-footer");decorateContent=()=>m(async()=>{let e=w("footer-source")||`${k.contentRoot}/footer`;if(this.body=await F({url:e,shouldDecorateLinks:!1}),!this.body)return;let[o,s]=[".region-selector",".social"].map(n=>this.body.querySelector(n)),[r,t]=[o?.parentElement,s?.parentElement];[r,t].forEach(n=>n?.replaceChildren()),E(this.body),r?.appendChild(o),t?.appendChild(s);let a=P(e);C({section:this.body,forceFederate:a.includes("/federal/")});let l=[T,this.decorateGrid,this.decorateProducts,this.loadIcons,this.decorateRegionPicker,this.decorateSocial,this.decoratePrivacy,this.decorateFooter];for await(let n of l)await R(),await n();let c=N?.martech||"";this.block.setAttribute("daa-lh",`gnav|${S()}|footer${c}`),this.block.append(this.elements.footer)},"Failed to decorate footer content","errorType=error,module=global-footer");loadMenuLogic=async()=>(this.menuLogic=this.menuLogic||new Promise(async e=>{let o=await q();this.decorateMenu=o.decorateMenu,this.decorateLinkGroup=o.decorateLinkGroup,e()}),this.menuLogic);decorateGrid=async()=>{this.elements.footerMenu="";let e=this.body.querySelectorAll(":scope > div > h2:first-child");return!e||!e.length?this.elements.footerMenu:(this.elements.footerMenu=i`<div class="feds-menu-content"></div>`,e.forEach(o=>this.elements.footerMenu.appendChild(o.parentElement)),await this.loadMenuLogic(),await this.decorateMenu({item:this.elements.footerMenu,type:"footerMenu"}),this.elements.headlines=this.elements.footerMenu.querySelectorAll(".feds-menu-headline"),this.elements.footerMenu)};loadIcons=async()=>{let e=await fetch(`${b}/blocks/global-footer/icons.svg`);e.ok||d({message:"Issue with loadIcons",e:`${e.statusText} url: ${e.url}`,tags:"errorType=info,module=global-footer"});let o=await e.text(),s=i`<div class="feds-footer-icons">${o}</div>`;this.block.append(s)};decorateProducts=async()=>{this.elements.featuredProducts="";let e=this.body.querySelector(".link-group");if(!e)return this.elements.featuredProducts;let o=e.parentElement;this.elements.featuredProducts=i`<div class="feds-featuredProducts"></div>`;let[s]=await Promise.all([v("featured-products",x()),this.loadMenuLogic()]);return s&&s.length&&this.elements.featuredProducts.append(i`<span class="feds-featuredProducts-label">${s}</span>`),o.querySelectorAll(".link-group").forEach(r=>{this.elements.featuredProducts.append(this.decorateLinkGroup(r))}),this.elements.featuredProducts};decorateRegionPicker=async()=>{this.elements.regionPicker="";let e=this.body.querySelector(".region-selector a");if(!e)return this.elements.regionPicker;let o;try{o=new URL(e.href)}catch{return d({message:`Could not create URL for region picker; href: ${e.href}`,tags:"errorType=error,module=global-footer"}),this.elements.regionPicker}let s="feds-regionPicker",r=i`<span class="feds-regionPicker-text">${e.textContent}</span>`,t=i`
      <a
        href="${e.href}"
        class="${s}"
        aria-expanded="false"
        aria-haspopup="true"
        role="button">
        <svg xmlns="http://www.w3.org/2000/svg" class="feds-regionPicker-globe" focusable="false">
          <use href="#footer-icon-globe" />
        </svg>
        ${r}
      </a>`;t.classList.add("modal","link-block"),t.dataset.modalPath=`${o.pathname}#_inline`,t.dataset.modalHash=o.hash;let a="feds-regionPicker-wrapper";this.elements.regionPicker=i`<div class="${a}">
        ${t}
      </div>`;let l=()=>t.getAttribute("aria-expanded")==="true";if(o.hash!==""){t.href=o.hash,t.classList[0]!=="modal"&&d({message:`Modal block class missing from region picker pre loading the block; locale: ${k}; regionPickerElem: ${t.outerHTML}`,tags:"errorType=warn,module=global-footer"});let{default:c}=await import("./modal-AN3SJQ56.js");await c(t);let n=async()=>{let u=document.querySelector(".region-nav");if(u){g(`${b}/blocks/region-nav/region-nav.css`);let{default:D}=await import("./region-nav-YVHG3J7E.js");D(u),M(u,f())}};await n(),t.classList[0]!=="modal"&&d({message:`Modal block class missing from region picker post loading the block; locale: ${k}; regionPickerElem: ${t.outerHTML}`,tags:"errorType=warn,module=global-footer"}),t.addEventListener("click",()=>{l()||(t.setAttribute("aria-expanded","true"),window.addEventListener("milo:modal:loaded",n,{once:!0}))}),window.addEventListener("milo:modal:closed",()=>{l()&&t.setAttribute("aria-expanded","false")})}else{t.href="#",e.href=$(e.href),L(e),this.elements.regionPicker.append(e);let{default:c}=await import("./region-nav-YVHG3J7E.js");g(`${b}/blocks/region-nav/region-nav.css`),c(e),t.addEventListener("click",n=>{n.preventDefault();let u=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",!u)}),document.addEventListener("click",n=>{n.preventDefault(),l()&&!n.target.closest(`.${a}`)&&t.setAttribute("aria-expanded",!1)})}return this.regionPicker};decorateSocial=()=>{this.elements.social="";let e=this.body.querySelector(".social");if(!e)return this.elements.social;let o=i`<ul class="feds-social" daa-lh="Social"></ul>`,s=r=>r.replace("#_blank","").replace("#_dnb","");return I.socialPlatforms.forEach((r,t)=>{let a=e.querySelector(`a[href*="${r}"]`);if(!a)return;let l=i`<li class="feds-social-item">
          <a
            href="${s(a.href)}"
            class="feds-social-link"
            aria-label="${r}"
            daa-ll="${p(r,t+1)}"
            target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" class="feds-social-icon" alt="${r} logo">
              <use href="#footer-icon-${r}" />
            </svg>
          </a>
        </li>`;o.append(l)}),this.elements.social=o.childElementCount!==0?o:"",this.elements.social};decoratePrivacy=()=>{this.elements.legal="";let e=this.body.querySelector("div > p > em");if(!e)return this.elements.legal;let o=e.closest("div"),s=new Date().getFullYear();for(e.replaceWith(i`<span class="feds-footer-copyright">
        Copyright Â© ${s} ${e.textContent}
      </span>`),o.querySelector('a[href*="#interest-based-ads"]')?.prepend(i`<svg xmlns="http://www.w3.org/2000/svg" class="feds-adChoices-icon" focusable="false">
        <use href="#footer-icon-adchoices" />
      </svg>`),this.elements.legal=i`<div class="feds-footer-legalWrapper" daa-lh="Legal"></div>`;o.children.length;){let t=o.firstElementChild;t.classList.add("feds-footer-privacySection"),t.querySelectorAll("a").forEach((a,l)=>{a.classList.add("feds-footer-privacyLink"),a.setAttribute("daa-ll",p(a.textContent,l+1))}),this.elements.legal.append(t)}return this.elements.legal};decorateFooter=()=>(this.elements.footer=i`<div class="feds-footer-wrapper">
        ${this.elements.footerMenu}
        ${this.elements.featuredProducts}
        <div class="feds-footer-options">
          <div class="feds-footer-miscLinks">
            ${this.elements.regionPicker}
            ${this.elements.social}
          </div>
          ${this.elements.legal}
        </div>
      </div>`,this.elements.footer)};function _(h){try{let e=new y({block:h});return A()&&h.classList.add("feds--dark"),e}catch(e){return d({message:"Could not create footer",e}),null}}export{_ as default};
