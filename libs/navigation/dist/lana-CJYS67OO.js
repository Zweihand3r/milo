(function(){let l={clientId:"",endpoint:"https://www.adobe.com/lana/ll",endpointStage:"https://www.stage.adobe.com/lana/ll",errorType:"e",sampleRate:1,tags:"",implicitSampleRate:1,useProd:!0},n=window;function f(){let{host:e}=window.location;return e.substring(e.length-10)===".adobe.com"&&e.substring(e.length-15)!==".corp.adobe.com"&&e.substring(e.length-16)!==".stage.adobe.com"}function c(e,o){e||(e={}),o||(o={});function t(a){return e[a]!==void 0?e[a]:o[a]!==void 0?o[a]:l[a]}return Object.keys(l).reduce((a,r)=>(a[r]=t(r),a),{})}function d(e,o){e=e&&e.stack?e.stack:e||"",e.length>2e3&&(e=`${e.slice(0,2e3)}<trunc>`);let t=c(o,n.lana.options);if(!t.clientId){console.warn("LANA ClientID is not set in options.");return}let r=parseInt(new URL(window.location).searchParams.get("lana-sample"),10)||(t.errorType==="i"?t.implicitSampleRate:t.sampleRate);if(!n.lana.debug&&!n.lana.localhost&&r<=Math.random()*100)return;let p=f(),w=!p||!t.useProd?t.endpointStage:t.endpoint,i=[`m=${encodeURIComponent(e)}`,`c=${encodeURI(t.clientId)}`,`s=${r}`,`t=${encodeURI(t.errorType)}`];if(t.tags&&i.push(`tags=${encodeURI(t.tags)}`),(!p||n.lana.debug||n.lana.localhost)&&console.log("LANA Msg: ",e,`
Opts:`,t),!n.lana.localhost||n.lana.debug){let s=new XMLHttpRequest;return n.lana.debug&&(i.push("d"),s.addEventListener("load",()=>{console.log("LANA response:",s.responseText)})),s.open("GET",`${w}?${i.join("&")}`),s.send(),s}}function u(e){d(e.reason||e.error||e.message,{errorType:"i"})}function h(){return n.location.search.toLowerCase().indexOf("lanadebug")!==-1}function g(){return n.location.host.toLowerCase().indexOf("localhost")!==-1}n.lana={debug:!1,log:d,options:c(n.lana&&n.lana.options)},h()&&(n.lana.debug=!0),g()&&(n.lana.localhost=!0),n.addEventListener("error",u),n.addEventListener("unhandledrejection",u)})();
