import{B as u,C as L,a as D,d as $,e as d,u as w}from"./chunk-VLPXW364.js";import"./chunk-NY3PBGKK.js";import"./chunk-TXSFCJFB.js";import"./chunk-I5JF36TS.js";import"./chunk-VP5VJMKQ.js";import"./chunk-YBWLHNHN.js";var o={...D,globalFooter:".global-footer",mainNavItems:".feds-navItem > a, .feds-navItem > button, .feds-navItem > .feds-cta-wrapper > .feds-cta",brand:".feds-brand",mainNavToggle:".feds-toggle",searchTrigger:".feds-search-trigger",searchField:".feds-search-input",signIn:".feds-signIn",signInDropdown:".feds-signIn-dropdown",profileButton:".feds-profile-button, .feds-signIn",logo:".feds-logo",profileMenu:".feds-profile-menu",profile:".feds-profile",breadCrumbItems:".feds-breadcrumbs li > a",expandedPopupTrigger:'.feds-navLink[aria-expanded = "true"]',promoLink:".feds-promo-link",imagePromo:"a.feds-promo-image",fedsNav:".feds-nav",popup:".feds-popup",headline:".feds-menu-headline",section:".feds-menu-section",column:".feds-menu-column:not(.feds-menu-column--group)",cta:".feds-cta",openSearch:'.feds-search-trigger[aria-expanded = "true"]',regionPicker:".feds-regionPicker",socialLink:".feds-social-link",privacyLink:".feds-footer-privacyLink",menuContent:".feds-menu-content"};o.profileDropdown=`
  ${o.signInDropdown} a[href],
  ${o.signInDropdown} button:not([disabled]),
  ${o.profileMenu} a[href],
  ${o.profileMenu} button:not([disabled])
`;o.popupItems=`
  ${o.navLink},
  ${o.promoLink},
  ${o.imagePromo},
  ${o.cta},
  ${o.regionPicker},
  ${o.socialLink},
  ${o.privacyLink}
`;var y=n=>!!(n&&n instanceof HTMLElement&&n.offsetWidth&&n.offsetHeight&&window.getComputedStyle(n).getPropertyValue("visibility")!=="hidden"),m=(n,e)=>{for(let t=n+1;t<e.length;t+=1)if(y(e[t]))return t;return-1},h=(n,e)=>{for(let t=n-1;t>=0;t-=1)if(y(e[t]))return t;return-1},b=()=>document.querySelector(o.expandedPopupTrigger)?.parentElement.querySelector(o.popup);var K=({e:n,element:e}={})=>{if(!e)return{};let t=[...e.querySelectorAll(o.popupItems)],r=t.findIndex(c=>c===n.target),s=document.activeElement.closest(o.column),i=[...e.querySelectorAll(o.column)],a=i.findIndex(c=>c.isEqualNode(s));return{popupItems:t,curr:r,prev:h(r,t),next:m(r,t),prevColumn:i[a-1],nextColumn:i[a+1]}},I=class{constructor({mainNav:e}){this.mainNav=e,this.addEventListeners(),this.desktop=window.matchMedia("(min-width: 900px)")}open({focus:e}={}){let t=[...b()?.querySelectorAll(o.popupItems)||[]];if(!t.length)return;let r=m(-1,t),s=h(t.length,t);e==="first"&&t[r].focus(),e==="last"&&t[s].focus()}focusMainNav=e=>{e||this.mainNav.focusCurr()};focusMainNavNext=e=>{if(e)return;let{next:t}=this.mainNav.getState();if(t>=0){this.mainNav.focusNext(),this.mainNav.open();return}u(),this.mainNav.focusCurr()};handleKeyDown=({e,element:t,isFooter:r})=>{let{popupItems:s,prev:i,next:a,prevColumn:c,nextColumn:l}=K({e,element:t}),p=r&&e.code==="Tab"&&e.shiftKey&&i===-1;if(!(r&&e.code==="Tab"&&!e.shiftKey&&a===-1||p))switch(e.preventDefault(),e.stopPropagation(),e.code){case"Tab":{if(e.shiftKey){if(i===-1){this.focusMainNav(r);break}s[i].focus()}else{if(a===-1){this.focusMainNavNext(r);break}s[a].focus()}break}case"Escape":{u(),this.focusMainNav(r);break}case"ArrowLeft":{let S=document.dir!=="rtl"&&!c?.querySelector(o.popupItems),x=document.dir==="rtl"&&!l?.querySelector(o.popupItems);if(S||x){this.focusMainNav(r);break}document.dir!=="rtl"?c.querySelector(o.popupItems).focus():l.querySelector(o.popupItems).focus();break}case"ArrowUp":{if(i===-1){this.focusMainNav(r);break}s[i].focus();break}case"ArrowRight":{let S=document.dir!=="rtl"&&!l?.querySelector(o.popupItems),x=document.dir==="rtl"&&!c?.querySelector(o.popupItems);if(S||x){this.focusMainNav(r);break}document.dir!=="rtl"?l.querySelector(o.popupItems).focus():c.querySelector(o.popupItems).focus();break}case"ArrowDown":{if(a===-1){this.focusMainNavNext(r);break}s[a].focus();break}default:break}};addEventListeners=()=>{document.querySelector(o.globalNav)?.addEventListener("keydown",e=>d(()=>{let t=b();!e.target.closest(o.popup)||!t||!this.desktop.matches||this.handleKeyDown({e,element:t,isFooter:!1})},`popup key failed ${e.code}`,"errorType=error,module=gnav-keyboard")),document.querySelector(o.globalFooter)?.addEventListener("keydown",e=>d(()=>{if(!this.desktop.matches)return;let t=e.target.closest(o.globalFooter);this.handleKeyDown({e,element:t,isFooter:!0})},`footer key failed ${e.code}`,"errorType=error,module=gnav-keyboard"))}},M=I;var v=()=>{let n=[...document.querySelectorAll(`${o.headline}[aria-expanded="true"]`)];n.forEach(e=>e.setAttribute("aria-expanded","false")),w(n[0])},k=({headline:n,focus:e}={})=>{if(v(),n.getAttribute("aria-haspopup")==="true"){n.setAttribute("aria-expanded","true"),w(n);let r=[...(n.closest(o.section)||n.closest(o.column)).querySelectorAll(o.popupItems)].filter(s=>y(s));e==="first"&&r[0].focus(),e==="last"&&r[r.length-1].focus()}},g=(n=b())=>{if(!n)return{popupItems:[]};let e=[...n.querySelectorAll(o.popupItems)],t=document.activeElement.closest(o.section)||document.activeElement.closest(o.column),r=[...n.querySelectorAll(o.section)];r.length||(r=[...n.querySelectorAll(o.column)]);let s=r.filter(f=>y(f)),i=s.findIndex(f=>f.isEqualNode(t)),a=s[0]?.querySelector(o.headline),c=s[s.length-1]?.querySelector(o.headline),l=s[i-1]?.querySelector(o.headline),p=s[i+1]?.querySelector(o.headline);return{visibleSections:s,currentSection:i,firstHeadline:a,lastHeadline:c,prevHeadline:l,nextHeadline:p,popupItems:e}},P=class{constructor({mainNav:e}){this.mainNav=e,this.addEventListeners(),this.desktop=window.matchMedia("(min-width: 900px)")}open({focus:e}={}){let{firstHeadline:t,lastHeadline:r,popupItems:s}=g();if(!s.length)return;let i=e==="last"?r:t;i&&i.getAttribute("aria-haspopup")==="true"&&(v(),i.setAttribute("aria-expanded","true"));let a=m(-1,s),c=h(s.length,s);e==="first"&&s[a].focus(),e==="last"&&s[c].focus(),w(e==="first"?s[a]:s[c])}mobileArrowUp=({prev:e,curr:t,element:r,isFooter:s})=>{if(e!==-1&&t-1===e){let{currentSection:a,popupItems:c}=g(r);c[e].focus(),a!==g(r).currentSection&&v();return}let{prevHeadline:i}=g(r);if(!i){this.focusMainNav(s);return}k({headline:i,focus:"last"})};mobileArrowDown=({next:e,element:t,isFooter:r})=>{if(e!==-1){let{currentSection:i,popupItems:a}=g(t);a[e].focus(),i!==g(t).currentSection&&v();return}let{nextHeadline:s}=g(t);if(!s){v(),this.focusMainNavNext(r);return}k({headline:s,focus:"first"})};focusMainNav=e=>{e||this.mainNav.focusCurr()};focusMainNavNext=e=>{e||(this.mainNav.focusNext(),this.mainNav.open())};handleKeyDown=({e,element:t,isFooter:r})=>{let s=[...t.querySelectorAll(o.popupItems)],i=s.findIndex(l=>l===e.target),a=h(i,s),c=m(i,s);switch(e.preventDefault(),e.stopPropagation(),e.code){case"Tab":{e.shiftKey?this.mobileArrowUp({prev:a,curr:i,element:t,isFooter:r}):this.mobileArrowDown({curr:i,next:c,element:t,isFooter:r});break}case"Escape":{u(),this.focusMainNav(r);break}case"ArrowLeft":{let{prevHeadline:l,nextHeadline:p}=g(t),f=document.dir!=="rtl"?l:p;if(!f){r||v(),document.dir!=="rtl"?this.focusMainNav(r):this.focusMainNavNext(r);break}k({headline:f,focus:"first"});break}case"ArrowUp":{this.mobileArrowUp({prev:a,curr:i,element:t,isFooter:r});break}case"ArrowRight":{let{prevHeadline:l,nextHeadline:p}=g(t),f=document.dir!=="rtl"?p:l;if(!f){r||v(),document.dir!=="rtl"?this.focusMainNavNext(r):this.focusMainNav(r);break}k({headline:f,focus:"first"});break}case"ArrowDown":{this.mobileArrowDown({next:c,element:t,isFooter:r});break}default:break}};addEventListeners=()=>{document.querySelector(o.globalNav)?.addEventListener("keydown",e=>d(()=>{let t=b();!e.target.closest(o.popup)||!t||this.desktop.matches||this.handleKeyDown({e,element:t,popupEl:t,isFooter:!1})},`popup key failed ${e.code}`,"errorType=error,module=gnav-keyboard")),document.querySelector(o.globalFooter)?.addEventListener("keydown",e=>d(()=>{let t=e.target.closest(o.menuContent);if(!t||this.desktop.matches)return;let r=t.querySelector(o.popupItems),s=t.querySelector(o.headline),i=e.target===r,a=e.target===s;if(!(e.shiftKey&&(i||a))){if(e.target.closest(o.headline)){k({headline:e.target.closest(o.headline),focus:"first"}),e.preventDefault(),e.stopPropagation();return}this.handleKeyDown({e,element:t,isFooter:!0})}},`footer key failed ${e.code}`,"errorType=error,module=gnav-keyboard"))}},T=P;var A=class{constructor(){this.desktop=window.matchMedia("(min-width: 900px)"),this.popup=new M({mainNav:this}),this.mobilePopup=new T({mainNav:this}),this.addEventListeners()}addEventListeners(){document.querySelector(o.globalNav).addEventListener("keydown",e=>d(()=>{if(!(!e.target.closest(o.fedsNav)||e.target.closest(o.popup)))switch(e.code){case"Tab":{if(e.shiftKey){let{prev:t,openTrigger:r}=this.getState();r&&(t===-1?u():(e.preventDefault(),this.focusPrev({focus:"last"})))}break}case"Escape":{u();break}case"ArrowLeft":{let{next:t,prev:r}=this.getState();if(document.dir!=="rtl"){if(r===-1)break;this.focusPrev({focus:null})}else{if(t===-1)break;this.focusNext({focus:null})}break}case"ArrowUp":{e.preventDefault(),e.stopPropagation(),this.focusPrev({focus:"last"});break}case"ArrowRight":{let{next:t,prev:r,openTrigger:s}=this.getState();if(document.dir!=="rtl"){if(t===-1)break;this.focusNext()}else{if(r===-1)break;this.focusPrev({focus:null})}s&&this.open();break}case"ArrowDown":{e.stopPropagation(),e.preventDefault();let{items:t,curr:r}=this.getState();if(t[r]&&t[r].hasAttribute("aria-haspopup")){this.open({focus:"first"});return}this.focusNext();break}default:break}},`mainNav key failed ${e.code}`,"errorType=error,module=gnav-keyboard"))}getState=()=>{let e=[...document.querySelectorAll(o.mainNavItems)],t=document.querySelector(o.expandedPopupTrigger),r=document.activeElement.closest(o.navItem)?.querySelector(o.mainNavItems),s=e.findIndex(i=>i===r);return{items:e,curr:s,prev:h(s,e),next:m(s,e),openTrigger:t}};focusCurr=()=>{let{items:e,curr:t}=this.getState();e[t].focus()};focusPrev=({focus:e}={})=>{let{items:t,prev:r}=this.getState(),s=document.querySelector(o.expandedPopupTrigger);u(),r!==-1&&(t[r].focus(),s&&this.open({focus:e}))};focusNext=()=>{let{items:e,next:t}=this.getState();t!==-1&&(u(),e[t].focus())};open=({focus:e,triggerEl:t,e:r}={})=>{let{items:s,curr:i}=this.getState(),a=t||s[i];if(!a||!a.hasAttribute("aria-haspopup"))return;r&&r.preventDefault(),a.getAttribute("aria-expanded")==="false"&&L({element:a});let c=a.parentElement;if(c.querySelector(o.popup)){this.desktop.matches?this.popup.open({focus:e}):this.mobilePopup.open({focus:e});return}let p=new MutationObserver(()=>{p.disconnect(),this.desktop.matches?this.popup.open({focus:e}):this.mobilePopup.open({focus:e})});p.observe(c,{childList:!0})}},H=A;var O=({e:n,isDesktop:e})=>{let t=[...document.querySelectorAll(`
      ${o.brand},
      ${o.mainNavToggle},
      ${o.mainNavItems},
      ${o.searchTrigger},
      ${o.searchField},
      ${o.signIn},
      ${o.profileButton},
      ${o.logo}
  `)],r=m(-1,t),s=h(t.length,t);e&&document.querySelector(o.openSearch)&&document.activeElement===t[n.shiftKey?r:s]&&(n.preventDefault(),t[n.shiftKey?s:r].focus())},C=({e:n,el:e})=>n.target.closest(`${o.signIn}, ${o.profileButton}`)?.getAttribute("aria-expanded")==="false"?(n.target.click(),e.querySelector(o.profileDropdown)?.focus(),!0):!1,E=({e:n})=>{let e=document.querySelectorAll(o.profileDropdown);if(!e.length)return{next:-1,prev:-1,items:[]};let t=[...e],r=t.findIndex(s=>s===n.target);return{next:r+1,prev:r-1,curr:r,items:t}},N=()=>{u(),document.querySelector(`${o.profileButton}, ${o.signIn}`)?.focus()},V=({e:n})=>{let{items:e,next:t}=E({e:n});if(e[t]){e[t].focus();return}n.preventDefault(),n.stopPropagation(),N()},B=({e:n})=>{let{items:e,prev:t}=E({e:n});if(e[t]){e[t].focus();return}n.preventDefault(),n.stopPropagation(),N()},q=class{constructor(){try{this.addEventListeners(),this.mainNav=new H,this.desktop=window.matchMedia("(min-width: 900px)")}catch(e){$({message:"Keyboard Navigation failed to load",e,tags:"errorType=error,module=gnav-keyboard"})}}addEventListeners=()=>{[...document.querySelectorAll(`${o.globalNav}, ${o.globalFooter}`)].forEach(e=>{e.addEventListener("keydown",t=>d(()=>{switch(t.code){case"Tab":{O({e:t,isDesktop:this.desktop.matches});let{items:r}=E({e:t}),s=t.target.closest(`${o.signIn}, ${o.profileButton}`);t.shiftKey&&t.target===s&&N(),r[r.length-1]===t.target&&(t.preventDefault(),t.stopPropagation(),N());break}case"Enter":case"Space":{if(t.target.closest(o.searchField))return;t.stopPropagation(),t.preventDefault(),t.target.click();break}case"ArrowDown":{if(t.target.closest(o.profile)){if(C({e:t,el:e}))break;V({e:t})}break}case"ArrowUp":{t.target.closest(o.profile)&&B({e:t});break}default:break}},`KeyboardNavigation index failed. ${t.code}`,"errorType=error,module=gnav-keyboard"))})}},re=q;export{re as default};
