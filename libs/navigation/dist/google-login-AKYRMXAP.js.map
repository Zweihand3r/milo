{
  "version": 3,
  "sources": ["../../features/google-login.js"],
  "sourcesContent": ["const GOOGLE_SCRIPT = 'https://accounts.google.com/gsi/client';\nconst GOOGLE_ID = '530526366930-l874a90ipfkn26naa71r010u8epp39jt.apps.googleusercontent.com';\nconst PLACEHOLDER = 'feds-googleLogin';\nconst WRAPPER = 'feds-profile';\n\nconst onToken = async (getMetadata, data, getConfig) => {\n  let destination;\n  const config = getConfig();\n  try {\n    destination = new URL(typeof config.googleLoginURLCallback === 'function' ? await config.googleLoginURLCallback()\n      : getMetadata('google-login-redirect'))?.href;\n  } catch {\n    // Do nothing\n  }\n\n  await window.adobeIMS.socialHeadlessSignIn({\n    provider_id: 'google',\n    idp_token: data?.credential,\n    client_id: window.adobeid?.client_id,\n    scope: window.adobeid?.scope,\n  }).then(() => {\n    if (window.DISABLE_PAGE_RELOAD === true) return;\n    // Existing account\n    if (destination) {\n      window.location.assign(destination);\n    } else {\n      window.location.reload();\n    }\n  }).catch(() => {\n    // New account\n    window.adobeIMS.signInWithSocialProvider('google', { redirect_uri: destination || window.location.href });\n  });\n};\n\nexport default async function initGoogleLogin(loadIms, getMetadata, loadScript, getConfig) {\n  try {\n    await loadIms();\n  } catch {\n    return;\n  }\n  if (window.adobeIMS?.isSignedInUser()) return;\n\n  await loadScript(GOOGLE_SCRIPT);\n  const placeholder = document.createElement('div');\n  placeholder.id = PLACEHOLDER;\n  document.querySelector(`.${WRAPPER}`)?.append(placeholder);\n\n  window.google?.accounts?.id?.initialize({\n    client_id: GOOGLE_ID,\n    callback: (data) => onToken(getMetadata, data, getConfig),\n    prompt_parent_id: PLACEHOLDER,\n    cancel_on_tap_outside: false,\n  });\n  window.google?.accounts?.id?.prompt();\n}\n"],
  "mappings": ";;;AAAA,IAAM,gBAAgB;AACtB,IAAM,YAAY;AAClB,IAAM,cAAc;AACpB,IAAM,UAAU;AAEhB,IAAM,UAAU,OAAO,aAAa,MAAM,cAAc;AACtD,MAAI;AACJ,QAAM,SAAS,UAAU;AACzB,MAAI;AACF,kBAAc,IAAI,IAAI,OAAO,OAAO,2BAA2B,aAAa,MAAM,OAAO,uBAAuB,IAC5G,YAAY,uBAAuB,CAAC,GAAG;AAAA,EAC7C,QAAQ;AAAA,EAER;AAEA,QAAM,OAAO,SAAS,qBAAqB;AAAA,IACzC,aAAa;AAAA,IACb,WAAW,MAAM;AAAA,IACjB,WAAW,OAAO,SAAS;AAAA,IAC3B,OAAO,OAAO,SAAS;AAAA,EACzB,CAAC,EAAE,KAAK,MAAM;AACZ,QAAI,OAAO,wBAAwB,KAAM;AAEzC,QAAI,aAAa;AACf,aAAO,SAAS,OAAO,WAAW;AAAA,IACpC,OAAO;AACL,aAAO,SAAS,OAAO;AAAA,IACzB;AAAA,EACF,CAAC,EAAE,MAAM,MAAM;AAEb,WAAO,SAAS,yBAAyB,UAAU,EAAE,cAAc,eAAe,OAAO,SAAS,KAAK,CAAC;AAAA,EAC1G,CAAC;AACH;AAEA,eAAO,gBAAuC,SAAS,aAAa,YAAY,WAAW;AACzF,MAAI;AACF,UAAM,QAAQ;AAAA,EAChB,QAAQ;AACN;AAAA,EACF;AACA,MAAI,OAAO,UAAU,eAAe,EAAG;AAEvC,QAAM,WAAW,aAAa;AAC9B,QAAM,cAAc,SAAS,cAAc,KAAK;AAChD,cAAY,KAAK;AACjB,WAAS,cAAc,IAAI,OAAO,EAAE,GAAG,OAAO,WAAW;AAEzD,SAAO,QAAQ,UAAU,IAAI,WAAW;AAAA,IACtC,WAAW;AAAA,IACX,UAAU,CAAC,SAAS,QAAQ,aAAa,MAAM,SAAS;AAAA,IACxD,kBAAkB;AAAA,IAClB,uBAAuB;AAAA,EACzB,CAAC;AACD,SAAO,QAAQ,UAAU,IAAI,OAAO;AACtC;",
  "names": []
}
