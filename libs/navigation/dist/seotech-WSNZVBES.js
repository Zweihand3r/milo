import"./chunk-YBWLHNHN.js";var l="https://14257-seotech.adobeioruntime.net",m="https://14257-seotech-stage.adobeioruntime.net";function u(e){window.lana?.log(`SEOTECH: ${e}`,{debug:!1,implicitSampleRate:100,sampleRate:100,tags:"errorType=seotech"})}async function b(e,t){let{env:n}=t,s=new URL(e)?.href,o=`${n==="prod"?l:m}/api/v1/web/seotech/getVideoObject?url=${s}`,c=await fetch(o,{headers:{"Content-Type":"application/json"}}),i=await c?.json();if(!c.ok)throw new Error(`Failed to fetch video: ${i?.error}`);return i.videoObject}function w(e){return{"adobedotcom-cc":"cc",acrobatmilo:"dc",bacom:"bacom",homepage_milo:"homepage",milo:"milo"}[e]}async function f(e){let t=new TextEncoder().encode(e),n=await window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(o=>o.toString(16).padStart(2,"0")).join("")}async function y(e,t,n){if(!e||!t)throw new Error("bucket and id are required");let{baseUrl:s}=n,a=`${s}/structured-data/${e}/${t}`,o=await fetch(a);return!o||!o.ok?null:await o.json()}async function g({locationUrl:e,getMetadata:t,createTag:n,getConfig:s}){let a=new URL(e),o=new URLSearchParams(a.search),c=(p,r)=>{if(!p)return;let h={type:"application/ld+json"};r&&(h.class=r);let d=n("script",h,JSON.stringify(p));document.head.append(d)},i=[];if(t("seotech-structured-data")==="on"){let p=w(s()?.imsClientId),r=await f(a.pathname?.replace(".html","")),h=o.get("seotech-api-base-url")||"https://www.adobe.com/seotech/api";i.push(y(p,r,{baseUrl:h}).then(d=>c(d,"seotech-structured-data")).catch(d=>u(d.message)))}if(t("seotech-video-url")){let p=s()?.env?.name;i.push(b(t("seotech-video-url"),{env:p}).then(r=>c(r,"seotech-video-url")).catch(r=>u(r.message)))}return Promise.all(i)}var U=g;export{l as SEOTECH_API_URL_PROD,m as SEOTECH_API_URL_STAGE,g as appendScriptTag,U as default,w as getRepoByImsClientId,y as getStructuredData,b as getVideoObject,u as logError,f as sha256};
