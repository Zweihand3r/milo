{
  "version": 3,
  "sources": ["../../utils/lana.js"],
  "sourcesContent": ["/* eslint-disable no-param-reassign */\n/* eslint-disable no-console */\n(function iife() {\n  const MSG_LIMIT = 2000;\n\n  const defaultOptions = {\n    clientId: '',\n    endpoint: 'https://www.adobe.com/lana/ll',\n    endpointStage: 'https://www.stage.adobe.com/lana/ll',\n    errorType: 'e',\n    sampleRate: 1,\n    tags: '',\n    implicitSampleRate: 1,\n    useProd: true,\n  };\n\n  const w = window;\n\n  function isProd() {\n    const { host } = window.location;\n    if (host.substring(host.length - 10) === '.adobe.com'\n      && host.substring(host.length - 15) !== '.corp.adobe.com'\n      && host.substring(host.length - 16) !== '.stage.adobe.com') {\n      return true;\n    }\n    return false;\n  }\n\n  function mergeOptions(op1, op2) {\n    if (!op1) {\n      op1 = {};\n    }\n\n    if (!op2) {\n      op2 = {};\n    }\n\n    function getOpt(key) {\n      if (op1[key] !== undefined) {\n        return op1[key];\n      }\n      if (op2[key] !== undefined) {\n        return op2[key];\n      }\n      return defaultOptions[key];\n    }\n\n    return Object.keys(defaultOptions).reduce((options, key) => {\n      options[key] = getOpt(key);\n      return options;\n    }, {});\n  }\n\n  function log(msg, options) {\n    msg = msg && msg.stack ? msg.stack : (msg || '');\n    if (msg.length > MSG_LIMIT) {\n      msg = `${msg.slice(0, MSG_LIMIT)}<trunc>`;\n    }\n\n    const o = mergeOptions(options, w.lana.options);\n    if (!o.clientId) {\n      console.warn('LANA ClientID is not set in options.');\n      return;\n    }\n\n    const sampleRateParam = parseInt(new URL(window.location).searchParams.get('lana-sample'), 10);\n    const sampleRate = sampleRateParam || (o.errorType === 'i' ? o.implicitSampleRate : o.sampleRate);\n\n    if (!w.lana.debug && !w.lana.localhost && sampleRate <= Math.random() * 100) return;\n\n    const isProdDomain = isProd();\n\n    const endpoint = (!isProdDomain || !o.useProd) ? o.endpointStage : o.endpoint;\n    const queryParams = [\n      `m=${encodeURIComponent(msg)}`,\n      `c=${encodeURI(o.clientId)}`,\n      `s=${sampleRate}`,\n      `t=${encodeURI(o.errorType)}`,\n    ];\n\n    if (o.tags) {\n      queryParams.push(`tags=${encodeURI(o.tags)}`);\n    }\n\n    if (!isProdDomain || w.lana.debug || w.lana.localhost) console.log('LANA Msg: ', msg, '\\nOpts:', o);\n\n    if (!w.lana.localhost || w.lana.debug) {\n      const xhr = new XMLHttpRequest();\n      if (w.lana.debug) {\n        queryParams.push('d');\n        xhr.addEventListener('load', () => {\n          console.log('LANA response:', xhr.responseText);\n        });\n      }\n      xhr.open('GET', `${endpoint}?${queryParams.join('&')}`);\n      xhr.send();\n      // eslint-disable-next-line consistent-return\n      return xhr;\n    }\n  }\n\n  function sendUnhandledError(e) {\n    log(e.reason || e.error || e.message, { errorType: 'i' });\n  }\n\n  function hasDebugParam() {\n    return w.location.search.toLowerCase().indexOf('lanadebug') !== -1;\n  }\n\n  function isLocalhost() {\n    return w.location.host.toLowerCase().indexOf('localhost') !== -1;\n  }\n\n  w.lana = {\n    debug: false,\n    log,\n    options: mergeOptions(w.lana && w.lana.options),\n  };\n\n  /* c8 ignore next */\n  if (hasDebugParam()) w.lana.debug = true;\n  if (isLocalhost()) w.lana.localhost = true;\n\n  w.addEventListener('error', sendUnhandledError);\n  w.addEventListener('unhandledrejection', sendUnhandledError);\n}());\n"],
  "mappings": "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",
  "names": []
}
