import{f as h,v as d}from"./chunk-KHBABMXA.js";var f={};window.mph={};var g=(e,t)=>{let r=`${e.locale.contentRoot}/placeholders.json`,n=t!=="default"&&typeof t=="string"&&t.length?`?sheet=${t}`:"";return`${r}${n}`},i=async({config:e,sheet:t,placeholderRequest:r,placeholderPath:n})=>{let c=n||g(e,t);return f[c]=f[c]||new Promise(async l=>{let s=await r||await d({resource:c,withCacheRules:!0}).catch(()=>({})),u=s.ok?await s.json():{data:[]};if(u.data.length===0){l({});return}let a={};u.data.forEach(o=>{window.mph[o.key]=o.value,a[o.key]=o.value}),l(a)}),f[c]};function y(e){return e.replaceAll("-"," ")}async function w(e,t,r){let n=!1,c="en-US",l=()=>{let a=t.locale.contentRoot,o=t.locale.prefix;return o.length?a.endsWith(o)?a.replace(o,""):a.replace(`${o}/`,"/"):a},s=async()=>{let a={locale:{ietf:c,contentRoot:l()}},o=await i({config:a,sheet:r}).catch(()=>({}));return n=!0,o};if(t.placeholders?.[e])return t.placeholders[e];let u=await i({config:t,sheet:r}).catch(async()=>await s());if(typeof u?.[e]=="string")return u[e];if(!n&&t.locale.ietf!==c){let a=await s();if(a?.[e])return a[e]}return y(e)}async function m(e,t,r="default"){return typeof e!="string"||!e.length?"":await w(e,t,r)}async function P(e,t,r="default"){if(!Array.isArray(e)||!e.length)return[];let n=[];return e.forEach(l=>{n.push(w(l,t,r))}),await Promise.all(n)}async function p(e,t,r=/{{(.*?)}}|%7B%7B(.*?)%7D%7D/g,n="default"){if(typeof e!="string"||!e.length)return"";let c=[...e.matchAll(new RegExp(r))];if(!c.length)return e;let l=Array.from(c,o=>o[1]||o[2]),s=await P(l,t,n),u=0,a=e.replaceAll(r,()=>s[u++]);return a=a.replace(/&nbsp;/g,"\xA0"),a}async function T({placeholderPath:e,placeholderRequest:t,nodes:r}){if(!r.length)return;let n=h();await i({placeholderPath:e,config:n,placeholderRequest:t});let c=r.map(async l=>{if(l.nodeType===Node.TEXT_NODE)l.nodeValue=await p(l.nodeValue,n);else if(l.nodeType===Node.ELEMENT_NODE){let s=await p(l.getAttribute("href"),n);l.setAttribute("href",s)}});await Promise.all(c)}export{m as a,P as b,p as c,T as d};
