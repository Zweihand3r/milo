import"./chunk-YBWLHNHN.js";function e(a,w){let d=()=>window.performance?window.performance.now():Date.now()-window.hlx.rum.firstReadTime;try{if(window.hlx=window.hlx||{},e.enhance=()=>{},!window.hlx.rum){let c=new URLSearchParams(window.location.search).get("rum"),t=window.SAMPLE_PAGEVIEWS_AT_RATE==="high"&&10||window.SAMPLE_PAGEVIEWS_AT_RATE==="low"&&1e3||c==="on"&&1||100,s=Math.random().toString(36).slice(-4),l=c!=="off"&&Math.random()*t<1;if(window.hlx.rum={weight:t,id:s,isSelected:l,firstReadTime:window.performance?window.performance.timeOrigin:Date.now(),sampleRUM:e,queue:[],collector:(...i)=>window.hlx.rum.queue.push(i)},l){let i=n=>{let r={source:"undefined error"};try{r.target=n.toString(),r.source=n.stack.split(`
`).filter(o=>o.match(/https?:\/\//)).shift().replace(/at ([^ ]+) \((.+)\)/,"$1@$2").replace(/ at /,"@").trim()}catch{}return r};window.addEventListener("error",({error:n})=>{let r=i(n);e("error",r)}),window.addEventListener("unhandledrejection",({reason:n})=>{let r={source:"Unhandled Rejection",target:n||"Unknown"};n instanceof Error&&(r=i(n)),e("error",r)}),e.baseURL=e.baseURL||new URL(window.RUM_BASE||"/",new URL("https://rum.hlx.page")),e.collectBaseURL=e.collectBaseURL||e.baseURL,e.sendPing=(n,r,o={})=>{let h=JSON.stringify({weight:t,id:s,referer:window.location.href,checkpoint:n,t:r,...o}),m=window.RUM_PARAMS?`?${new URLSearchParams(window.RUM_PARAMS).toString()}`:"",{href:u,origin:f}=new URL(`.rum/${t}${m}`,e.collectBaseURL),R=f===window.location.origin?new Blob([h],{type:"application/json"}):h;navigator.sendBeacon(u,R),console.debug(`ping:${n}`,o)},e.sendPing("top",d()),e.enhance=()=>{if(document.querySelector('script[src*="rum-enhancer"]'))return;let n=document.createElement("script");n.src=new URL(".rum/@adobe/helix-rum-enhancer@^2/src/index.js",e.baseURL).href,document.head.appendChild(n)},window.hlx.RUM_MANUAL_ENHANCE||e.enhance()}}window.hlx.rum&&window.hlx.rum.isSelected&&a&&window.hlx.rum.collector(a,w,d()),document.dispatchEvent(new CustomEvent("rum",{detail:{checkpoint:a,data:w}}))}catch{}}export{e as sampleRUM};
