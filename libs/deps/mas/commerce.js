var xt=Object.defineProperty;var fr=(e,t,o)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var pr=(e,t)=>{for(var o in t)xt(e,o,{get:t[o],enumerable:!0})};var F=(e,t,o)=>(fr(e,typeof t!="symbol"?t+"":t,o),o),kt=(e,t,o)=>{if(!t.has(e))throw TypeError("Cannot "+o)};var je=(e,t,o)=>(kt(e,t,"read from private field"),o?o.call(e):t.get(e)),bt=(e,t,o)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,o)},Ve=(e,t,o,r)=>(kt(e,t,"write to private field"),r?r.call(e,o):t.set(e,o),o);var ce;(function(e){e.STAGE="STAGE",e.PRODUCTION="PRODUCTION",e.LOCAL="LOCAL"})(ce||(ce={}));var Ye;(function(e){e.STAGE="STAGE",e.PRODUCTION="PROD",e.LOCAL="LOCAL"})(Ye||(Ye={}));var ae;(function(e){e.DRAFT="DRAFT",e.PUBLISHED="PUBLISHED"})(ae||(ae={}));var q;(function(e){e.V2="UCv2",e.V3="UCv3"})(q||(q={}));var I;(function(e){e.CHECKOUT="checkout",e.CHECKOUT_EMAIL="checkout/email",e.SEGMENTATION="segmentation",e.BUNDLE="bundle",e.COMMITMENT="commitment",e.RECOMMENDATION="recommendation",e.EMAIL="email",e.PAYMENT="payment",e.CHANGE_PLAN_TEAM_PLANS="change-plan/team-upgrade/plans",e.CHANGE_PLAN_TEAM_PAYMENT="change-plan/team-upgrade/payment"})(I||(I={}));var Be=function(e){var t;return(t=dr.get(e))!==null&&t!==void 0?t:e},dr=new Map([["countrySpecific","cs"],["quantity","q"],["authCode","code"],["checkoutPromoCode","apc"],["rurl","rUrl"],["curl","cUrl"],["ctxrturl","ctxRtUrl"],["country","co"],["language","lang"],["clientId","cli"],["context","ctx"],["productArrangementCode","pa"],["offerType","ot"],["marketSegment","ms"]]);var Rt=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nt=function(e,t){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var r=o.call(e),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(l){s={error:l}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return i};function K(e,t,o){var r,n;try{for(var i=Rt(Object.entries(e)),s=i.next();!s.done;s=i.next()){var l=Nt(s.value,2),u=l[0],f=l[1],c=Be(u);f!=null&&o.has(c)&&t.set(c,f)}}catch(p){r={error:p}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}function me(e){switch(e){case ce.PRODUCTION:return"https://commerce.adobe.com";default:return"https://commerce-stg.adobe.com"}}function he(e,t){var o,r;for(var n in e){var i=e[n];try{for(var s=(o=void 0,Rt(Object.entries(i))),l=s.next();!l.done;l=s.next()){var u=Nt(l.value,2),f=u[0],c=u[1];if(c!=null){var p=Be(f);t.set("items["+n+"]["+p+"]",c)}}}catch(d){o={error:d}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}}}var mr=function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]]);return o},hr=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function It(e){_r(e);var t=e.env,o=e.items,r=e.workflowStep,n=mr(e,["env","items","workflowStep"]),i=new URL(me(t));return i.pathname=r+"/",he(o,i.searchParams),K(n,i.searchParams,gr),i.toString()}var gr=new Set(["cli","co","lang","ctx","cUrl","mv","nglwfdata","otac","promoid","rUrl","sdid","spint","trackingid","code","campaignid","appctxid"]),Er=["env","workflowStep","clientId","country","items"];function _r(e){var t,o;try{for(var r=hr(Er),n=r.next();!n.done;n=r.next()){var i=n.value;if(!e[i])throw new Error('Argument "checkoutData" is not valid, missing: '+i)}}catch(s){t={error:s}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(t)throw t.error}}return!0}var Pr=function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]]);return o},yr=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ar="p_draft_landscape",Sr="/store/";function $e(e){Or(e);var t=e.env,o=e.items,r=e.workflowStep,n=e.ms,i=e.marketSegment,s=e.ot,l=e.offerType,u=e.pa,f=e.productArrangementCode,c=e.landscape,p=Pr(e,["env","items","workflowStep","ms","marketSegment","ot","offerType","pa","productArrangementCode","landscape"]),d={marketSegment:i??n,offerType:l??s,productArrangementCode:f??u},h=new URL(me(t));return h.pathname=""+Sr+r,r!==I.SEGMENTATION&&r!==I.CHANGE_PLAN_TEAM_PLANS&&he(o,h.searchParams),r===I.SEGMENTATION&&K(d,h.searchParams,qe),K(p,h.searchParams,qe),c===ae.DRAFT&&K({af:Ar},h.searchParams,qe),h.toString()}var qe=new Set(["af","ai","apc","appctxid","cli","co","csm","ctx","ctxRtUrl","DCWATC","dp","fr","gsp","ijt","lang","lo","mal","ms","mv","mv2","nglwfdata","ot","otac","pa","pcid","promoid","q","rf","sc","scl","sdid","sid","spint","svar","th","thm","trackingid","usid","workflowid","context.guid","so.ca","so.su","so.tr","so.va"]),wr=["env","workflowStep","clientId","country"];function Or(e){var t,o;try{for(var r=yr(wr),n=r.next();!n.done;n=r.next()){var i=n.value;if(!e[i])throw new Error('Argument "checkoutData" is not valid, missing: '+i)}}catch(s){t={error:s}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(t)throw t.error}}if(e.workflowStep!==I.SEGMENTATION&&e.workflowStep!==I.CHANGE_PLAN_TEAM_PLANS&&!e.items)throw new Error('Argument "checkoutData" is not valid, missing: items');return!0}function ze(e,t){switch(e){case q.V2:return It(t);case q.V3:return $e(t);default:return console.warn("Unsupported CheckoutType, will use UCv3 as default. Given type: "+e),$e(t)}}var Xe;(function(e){e.BASE="BASE",e.TRIAL="TRIAL",e.PROMOTION="PROMOTION"})(Xe||(Xe={}));var O;(function(e){e.MONTH="MONTH",e.YEAR="YEAR",e.TWO_YEARS="TWO_YEARS",e.THREE_YEARS="THREE_YEARS",e.PERPETUAL="PERPETUAL",e.TERM_LICENSE="TERM_LICENSE",e.ACCESS_PASS="ACCESS_PASS",e.THREE_MONTHS="THREE_MONTHS",e.SIX_MONTHS="SIX_MONTHS"})(O||(O={}));var v;(function(e){e.ANNUAL="ANNUAL",e.MONTHLY="MONTHLY",e.TWO_YEARS="TWO_YEARS",e.THREE_YEARS="THREE_YEARS",e.P1D="P1D",e.P1Y="P1Y",e.P3Y="P3Y",e.P10Y="P10Y",e.P15Y="P15Y",e.P3D="P3D",e.P7D="P7D",e.P30D="P30D",e.HALF_YEARLY="HALF_YEARLY",e.QUARTERLY="QUARTERLY"})(v||(v={}));var Ke;(function(e){e.INDIVIDUAL="INDIVIDUAL",e.TEAM="TEAM",e.ENTERPRISE="ENTERPRISE"})(Ke||(Ke={}));var Ze;(function(e){e.COM="COM",e.EDU="EDU",e.GOV="GOV"})(Ze||(Ze={}));var Je;(function(e){e.DIRECT="DIRECT",e.INDIRECT="INDIRECT"})(Je||(Je={}));var Qe;(function(e){e.ENTERPRISE_PRODUCT="ENTERPRISE_PRODUCT",e.ETLA="ETLA",e.RETAIL="RETAIL",e.VIP="VIP",e.VIPMP="VIPMP",e.FREE="FREE"})(Qe||(Qe={}));var Mt=(e,t)=>String(e??"").toLowerCase()==String(t??"").toLowerCase();function _(e,t={},{metadata:o=!0,search:r=!0,storage:n=!0}={}){let i;if(r&&i==null){let s=new URLSearchParams(window.location.search),l=ge(r)?r:e;i=s.get(l)}if(n&&i==null){let s=ge(n)?n:e;i=window.sessionStorage.getItem(s)??window.localStorage.getItem(s)}if(o&&i==null){let s=Tr(ge(o)?o:e);i=document.documentElement.querySelector(`meta[name="${s}"]`)?.content}return i??t[e]}var Z=()=>{};var Ut=e=>typeof e=="boolean",V=e=>typeof e=="function",Dt=e=>typeof e=="number";var ge=e=>typeof e=="string",et=e=>ge(e)&&e,tt=e=>Dt(e)&&Number.isFinite(e)&&e>0;function J(e,t=o=>o==null||o===""){return e!=null&&Object.entries(e).forEach(([o,r])=>{t(r)&&delete e[o]}),e}function E(e,t){if(Ut(e))return e;let o=String(e);return o==="1"||o==="true"?!0:o==="0"||o==="false"?!1:t}function Y(e,t,o){let r=Object.values(t);return r.find(n=>Mt(n,e))??o??r[0]}function Tr(e=""){return String(e).replace(/(\p{Lowercase_Letter})(\p{Uppercase_Letter})/gu,(t,o,r)=>`${o}-${r}`).replace(/\W+/gu,"-").toLowerCase()}function Q(e,t=1){return Dt(e)||(e=Number.parseInt(e,10)),!Number.isNaN(e)&&e>0&&Number.isFinite(e)?e:t}var vr="no promo",Wt="promo-tag",Cr="yellow",Lr="neutral",xr=(e,t,o)=>{let r=i=>i||vr,n=o?` (was "${r(t)}")`:"";return`${r(e)}${n}`},kr="cancel-context",le=(e,t)=>{let o=e===kr,r=!o&&e?.length>0,n=(r||o)&&(t&&t!=e||!t&&!o),i=n&&r||!n&&!!t,s=i?e||t:void 0;return{effectivePromoCode:s,overridenPromoCode:e,className:i?Wt:`${Wt} no-promo`,text:xr(s,t,n),variant:i?Cr:Lr,isOverriden:n}};var rt="ABM",ot="PUF",nt="M2M",it="PERPETUAL",st="P3Y",br="TAX_INCLUSIVE_DETAILS",Rr="TAX_EXCLUSIVE",Gt={ABM:rt,PUF:ot,M2M:nt,PERPETUAL:it,P3Y:st},Mo={[rt]:{commitment:O.YEAR,term:v.MONTHLY},[ot]:{commitment:O.YEAR,term:v.ANNUAL},[nt]:{commitment:O.MONTH,term:v.MONTHLY},[it]:{commitment:O.PERPETUAL,term:void 0},[st]:{commitment:O.THREE_MONTHS,term:v.P3Y}},Ft="Value is not an offer",Ee=e=>{if(typeof e!="object")return Ft;let{commitment:t,term:o}=e,r=Nr(t,o);return{...e,planType:r}};var Nr=(e,t)=>{switch(e){case void 0:return Ft;case"":return"";case O.YEAR:return t===v.MONTHLY?rt:t===v.ANNUAL?ot:"";case O.MONTH:return t===v.MONTHLY?nt:"";case O.PERPETUAL:return it;case O.TERM_LICENSE:return t===v.P3Y?st:"";default:return""}};function ct(e){let{priceDetails:t}=e,{price:o,priceWithoutDiscount:r,priceWithoutTax:n,priceWithoutDiscountAndTax:i,taxDisplay:s}=t;if(s!==br)return e;let l={...e,priceDetails:{...t,price:n??o,priceWithoutDiscount:i??r,taxDisplay:Rr}};return l.offerType==="TRIAL"&&l.priceDetails.price===0&&(l.priceDetails.price=l.priceDetails.priceWithoutDiscount),l}var{freeze:ue}=Object,M=ue({...q}),U=ue({...I}),$={STAGE:"STAGE",PRODUCTION:"PRODUCTION",LOCAL:"LOCAL"},at=ue({...O}),lt=ue({...Gt}),ut=ue({...v}),ee=()=>`RNd ${Math.floor(Math.random()*1e3)}`,{price:Ht=ee,pricePromo:jt=ee,priceOptical:Vt=ee,priceStrikethrough:Yt=ee,priceAnnual:Bt=ee,discount:qt=ee}={};var Et={};pr(Et,{CLASS_NAME_FAILED:()=>_e,CLASS_NAME_PENDING:()=>Pe,CLASS_NAME_RESOLVED:()=>ye,ERROR_MESSAGE_BAD_REQUEST:()=>Ae,ERROR_MESSAGE_MISSING_LITERALS_URL:()=>Ir,ERROR_MESSAGE_OFFER_NOT_FOUND:()=>ft,EVENT_TYPE_ERROR:()=>Mr,EVENT_TYPE_FAILED:()=>Se,EVENT_TYPE_PENDING:()=>we,EVENT_TYPE_READY:()=>te,EVENT_TYPE_RESOLVED:()=>Oe,LOG_NAMESPACE:()=>pt,Landscape:()=>z,PARAM_AOS_API_KEY:()=>Ur,PARAM_ENV:()=>dt,PARAM_LANDSCAPE:()=>mt,PARAM_WCS_API_KEY:()=>Dr,STATE_FAILED:()=>D,STATE_PENDING:()=>W,STATE_RESOLVED:()=>G,TAG_NAME_SERVICE:()=>H,WCS_PROD_URL:()=>ht,WCS_STAGE_URL:()=>gt});var _e="placeholder-failed",Pe="placeholder-pending",ye="placeholder-resolved",Ae="Bad WCS request",ft="Commerce offer not found",Ir="Literals URL not provided",Mr="wcms:commerce:error",Se="wcms:placeholder:failed",we="wcms:placeholder:pending",te="wcms:commerce:ready",Oe="wcms:placeholder:resolved",pt="wcms/commerce",dt="commerce.env",mt="commerce.landscape",Ur="commerce.aosKey",Dr="commerce.wcsKey",ht="https://www.adobe.com/web_commerce_artifact",gt="https://www.stage.adobe.com/web_commerce_artifact_stage",D="failed",W="pending",G="resolved",H="wcms-commerce",z={DRAFT:"DRAFT",PUBLISHED:"PUBLISHED"};var _t={clientId:"merch-at-scale",delimiter:"\xB6",ignoredProperties:["analytics","literals"],serializableTypes:["Array","Object"],sampleRate:30,tags:"consumer=milo/commerce"},$t=new Set,Wr=e=>e instanceof Error||typeof e.originatingRequest=="string";function zt(e){if(e==null)return;let t=typeof e;if(t==="function"){let{name:o}=e;return o?`${t} ${o}`:t}if(t==="object"){if(e instanceof Error)return e.message;if(typeof e.originatingRequest=="string"){let{message:r,originatingRequest:n,status:i}=e;return[r,i,n].filter(s=>s).join(" ")}let o=e[Symbol.toStringTag]??Object.getPrototypeOf(e).constructor.name;if(!_t.serializableTypes.includes(o))return o}return e}function Gr(e,t){if(!_t.ignoredProperties.includes(e))return zt(t)}var Pt={append(e){let{delimiter:t,sampleRate:o,tags:r,clientId:n}=_t,{message:i,params:s}=e,l=[],u=i,f=[];s.forEach(d=>{d!=null&&(Wr(d)?l:f).push(d)}),l.length&&(u+=" ",u+=l.map(zt).join(" "));let{pathname:c,search:p}=window.location;u+=`${t}page=`,u+=c+p,f.length&&(u+=`${t}facts=`,u+=JSON.stringify(f,Gr)),$t.has(u)||($t.add(u),window.lana?.log(u,{sampleRate:o,tags:r,clientId:n}))}};var m=Object.freeze({checkoutClientId:"adobe_com",checkoutWorkflow:M.V3,checkoutWorkflowStep:U.EMAIL,country:"US",displayOldPrice:!0,displayPerUnit:!1,displayRecurrence:!0,displayTax:!1,env:$.PRODUCTION,forceTaxExclusive:!1,language:"en",entitlement:!1,extraOptions:{},modal:!1,promotionCode:"",quantity:1,wcsApiKey:"wcms-commerce-ims-ro-user-milo",wcsBufferDelay:1,wcsURL:"https://www.adobe.com/web_commerce_artifact",landscape:z.PUBLISHED,wcsBufferLimit:1});function Xt(e,{once:t=!1}={}){let o=null;function r(){let n=document.querySelector(H);n!==o&&(o=n,n&&e(n))}return document.addEventListener(te,r,{once:t}),B(r),()=>document.removeEventListener(te,r)}function fe(e,{country:t,forceTaxExclusive:o,perpetual:r}){let n;if(e.length<2)n=e;else{let i=t==="GB"||r?"EN":"MULT",[s,l]=e;n=[s.language===i?s:l]}return o&&(n=n.map(ct)),n}var B=e=>window.setTimeout(e);function re(e,t=1){if(e==null)return[t];let o=(Array.isArray(e)?e:String(e).split(",")).map(Q).filter(tt);return o.length||(o=[t]),o}function Te(e){return e==null?[]:(Array.isArray(e)?e:String(e).split(",")).filter(et)}function C(){return window.customElements.get(H)?.instance}var Fr="en_US",a={ar:"AR_es",be_en:"BE_en",be_fr:"BE_fr",be_nl:"BE_nl",br:"BR_pt",ca:"CA_en",ch_de:"CH_de",ch_fr:"CH_fr",ch_it:"CH_it",cl:"CL_es",co:"CO_es",la:"DO_es",mx:"MX_es",pe:"PE_es",africa:"MU_en",dk:"DK_da",de:"DE_de",ee:"EE_et",eg_ar:"EG_ar",eg_en:"EG_en",es:"ES_es",fr:"FR_fr",gr_el:"GR_el",gr_en:"GR_en",ie:"IE_en",il_he:"IL_iw",it:"IT_it",lv:"LV_lv",lt:"LT_lt",lu_de:"LU_de",lu_en:"LU_en",lu_fr:"LU_fr",my_en:"MY_en",my_ms:"MY_ms",hu:"HU_hu",mt:"MT_en",mena_en:"DZ_en",mena_ar:"DZ_ar",nl:"NL_nl",no:"NO_nb",pl:"PL_pl",pt:"PT_pt",ro:"RO_ro",si:"SI_sl",sk:"SK_sk",fi:"FI_fi",se:"SE_sv",tr:"TR_tr",uk:"GB_en",at:"AT_de",cz:"CZ_cs",bg:"BG_bg",ru:"RU_ru",ua:"UA_uk",au:"AU_en",in_en:"IN_en",in_hi:"IN_hi",id_en:"ID_en",id_id:"ID_in",nz:"NZ_en",sa_ar:"SA_ar",sa_en:"SA_en",sg:"SG_en",cn:"CN_zh-Hans",tw:"TW_zh-Hant",hk_zh:"HK_zh-hant",jp:"JP_ja",kr:"KR_ko",za:"ZA_en",ng:"NG_en",cr:"CR_es",ec:"EC_es",pr:"US_es",gt:"GT_es",cis_en:"AZ_en",cis_ru:"AZ_ru",sea:"SG_en",th_en:"TH_en",th_th:"TH_th"},ve=Object.freeze({LOCAL:"local",PROD:"prod",STAGE:"stage"});function Kt({locale:e={}}={}){if(!e.prefix)return{country:m.country,language:m.language,locale:Fr};let t=e.prefix.replace("/","")??"",[o=m.country,r=m.language]=(a[t]??t).split("_",2);return o=o.toUpperCase(),r=r.toLowerCase(),{country:o,language:r,locale:`${r}_${o}`}}function yt(e={}){let{commerce:t={},locale:o=void 0}=e,r=$.PRODUCTION,n=ht,i=["local","stage"].includes(e.env?.name),s=_(dt,t,{metadata:!1})?.toLowerCase()==="stage";i&&s&&(r=$.STAGE,n=gt);let l=_("checkoutClientId",t)??m.checkoutClientId,u=Y(_("checkoutWorkflow",t),M,m.checkoutWorkflow),f=U.CHECKOUT;u===M.V3&&(f=Y(_("checkoutWorkflowStep",t),U,m.checkoutWorkflowStep));let c=E(_("displayOldPrice",t),m.displayOldPrice),p=E(_("displayPerUnit",t),m.displayPerUnit),d=E(_("displayRecurrence",t),m.displayRecurrence),h=E(_("displayTax",t),m.displayTax),g=E(_("entitlement",t),m.entitlement),w=E(_("modal",t),m.modal),P=E(_("forceTaxExclusive",t),m.forceTaxExclusive),A=_("promotionCode",t)??m.promotionCode,k=re(_("quantity",t)),T=_("wcsApiKey",t)??m.wcsApiKey,b=e.env?.name===ve.PROD?z.PUBLISHED:Y(_(mt,t),z,m.landscape),R=Q(_("wcsBufferDelay",t),m.wcsBufferDelay),y=Q(_("wcsBufferLimit",t),m.wcsBufferLimit);return{...Kt({locale:o}),displayOldPrice:c,checkoutClientId:l,checkoutWorkflow:u,checkoutWorkflowStep:f,displayPerUnit:p,displayRecurrence:d,displayTax:h,entitlement:g,extraOptions:m.extraOptions,modal:w,env:r,forceTaxExclusive:P,promotionCode:A,quantity:k,wcsApiKey:T,wcsBufferDelay:R,wcsBufferLimit:y,wcsURL:n,landscape:b}}var Jt="debug",Hr="error",jr="info",Vr="warn",Yr=Date.now(),At=new Set,St=new Set,Zt=new Map,pe=Object.freeze({DEBUG:Jt,ERROR:Hr,INFO:jr,WARN:Vr}),Qt={append({level:e,message:t,params:o,timestamp:r,source:n}){console[e](`${r}ms [${n}] %c${t}`,"font-weight: bold;",...o)}},er={filter:({level:e})=>e!==Jt},Br={filter:()=>!1};function qr(e,t,o,r,n){return{level:e,message:t,namespace:o,get params(){if(r.length===1){let[i]=r;V(i)&&(r=i(),Array.isArray(r)||(r=[r]))}return r},source:n,timestamp:Date.now()-Yr}}function $r(e){[...St].every(t=>t(e))&&At.forEach(t=>t(e))}function tr(e){let t=(Zt.get(e)??0)+1;Zt.set(e,t);let o=`${e} #${t}`,r=i=>(s,...l)=>$r(qr(i,s,e,l,o)),n=Object.seal({id:o,namespace:e,module(i){return tr(`${n.namespace}/${i}`)},debug:r(pe.DEBUG),error:r(pe.ERROR),info:r(pe.INFO),warn:r(pe.WARN)});return n}function Ce(...e){e.forEach(t=>{let{append:o,filter:r}=t;V(r)?St.add(r):V(o)&&At.add(o)})}function zr(e={}){let{name:t}=e,o=E(_("commerce.debug",{search:!0,storage:!0}),t===ve.LOCAL);return Ce(o?Qt:er),t===ve.PROD&&Ce(Pt),S}function Xr(){At.clear(),St.clear()}var S={...tr(pt),Level:pe,Plugins:{consoleAppender:Qt,debugFilter:er,quietFilter:Br,lanaAppender:Pt},init:zr,reset:Xr,use:Ce};var Kr={CLASS_NAME_FAILED:_e,CLASS_NAME_PENDING:Pe,CLASS_NAME_RESOLVED:ye,EVENT_TYPE_FAILED:Se,EVENT_TYPE_PENDING:we,EVENT_TYPE_RESOLVED:Oe,STATE_FAILED:D,STATE_PENDING:W,STATE_RESOLVED:G},Zr={[D]:_e,[W]:Pe,[G]:ye},Jr={[D]:Se,[W]:we,[G]:Oe},ke=new WeakMap;function L(e){if(!ke.has(e)){let t=S.module(e.constructor.is);ke.set(e,{changes:new Map,connected:!1,dispose:Z,error:void 0,log:t,options:void 0,promises:[],state:W,timer:null,value:void 0,version:0})}return ke.get(e)}function Le(e){let t=L(e),{error:o,promises:r,state:n}=t;(n===G||n===D)&&(t.promises=[],n===G?r.forEach(({resolve:i})=>i(e)):n===D&&r.forEach(({reject:i})=>i(o))),e.dispatchEvent(new CustomEvent(Jr[n],{bubbles:!0}))}function xe(e){let t=ke.get(e);[D,W,G].forEach(o=>{e.classList.toggle(Zr[o],o===t.state)})}var Qr={get error(){return L(this).error},get log(){return L(this).log},get options(){return L(this).options},get state(){return L(this).state},get value(){return L(this).value},attributeChangedCallback(e,t,o){L(this).changes.set(e,o),this.requestUpdate()},connectedCallback(){L(this).dispose=Xt(()=>this.requestUpdate(!0))},disconnectedCallback(){let e=L(this);e.connected&&(e.connected=!1,e.log.debug("Disconnected:",{element:this})),e.dispose(),e.dispose=Z},onceSettled(){let{error:e,promises:t,state:o}=L(this);return G===o?Promise.resolve(this):D===o?Promise.reject(e):new Promise((r,n)=>{t.push({resolve:r,reject:n})})},toggleResolved(e,t,o){let r=L(this);return e!==r.version?!1:(o!==void 0&&(r.options=o),r.state=G,r.value=t,xe(this),this.log.debug("Resolved:",{element:this,value:t}),B(()=>Le(this)),!0)},toggleFailed(e,t,o){let r=L(this);return e!==r.version?!1:(o!==void 0&&(r.options=o),r.error=t,r.state=D,xe(this),r.log.error("Failed:",{element:this,error:t}),B(()=>Le(this)),!0)},togglePending(e){let t=L(this);return t.version++,e&&(t.options=e),t.state=W,xe(this),B(()=>Le(this)),t.version},requestUpdate(e=!1){if(!this.isConnected||!C())return;let t=L(this);if(t.timer)return;let{error:o,options:r,state:n,value:i,version:s}=t;t.state=W,t.timer=B(async()=>{t.timer=null;let l=null;if(t.changes.size&&(l=Object.fromEntries(t.changes.entries()),t.changes.clear()),t.connected?t.log.debug("Updated:",{element:this,changes:l}):(t.connected=!0,t.log.debug("Connected:",{element:this,changes:l})),l||e)try{await this.render?.()===!1&&t.state===W&&t.version===s&&(t.state=n,t.error=o,t.value=i,xe(this),Le(this))}catch(u){this.toggleFailed(t.version,u,r)}})}};function rr(e={}){return Object.entries(e).forEach(([t,o])=>{(o==null||o===""||o?.length===0)&&delete e[t]}),e}function be(e,t={}){let{tag:o,is:r}=e,n=document.createElement(o,{is:r});return n.setAttribute("is",r),Object.assign(n.dataset,rr(t)),n}function Re(e){let{tag:t,is:o,prototype:r}=e,n=window.customElements.get(o);return n||(Object.defineProperties(r,Object.getOwnPropertyDescriptors(Qr)),n=Object.defineProperties(e,Object.getOwnPropertyDescriptors(Kr)),window.customElements.define(o,n,{extends:t})),n}function Ne(e,t=document.body){return Array.from(t?.querySelectorAll(`${e.tag}[is="${e.is}"]`)??[])}function Ie(e,t={}){return e instanceof HTMLElement?(Object.assign(e.dataset,rr(t)),e):null}var eo="download",to="upgrade",X,oe=class oe extends HTMLAnchorElement{constructor(){super();bt(this,X,void 0);this.addEventListener("click",this.clickHandler)}static get observedAttributes(){return["data-checkout-workflow","data-checkout-workflow-step","data-extra-options","data-ims-country","data-perpetual","data-promotion-code","data-quantity","data-template","data-wcs-osi","data-entitlement","data-upgrade","data-modal"]}static createCheckoutLink(o={},r=""){let n=C();if(!n)return null;let{checkoutMarketSegment:i,checkoutWorkflow:s,checkoutWorkflowStep:l,entitlement:u,upgrade:f,modal:c,perpetual:p,promotionCode:d,quantity:h,wcsOsi:g,extraOptions:w}=n.collectCheckoutOptions(o),P=be(oe,{checkoutMarketSegment:i,checkoutWorkflow:s,checkoutWorkflowStep:l,entitlement:u,upgrade:f,modal:c,perpetual:p,promotionCode:d,quantity:h,wcsOsi:g,extraOptions:w});return r&&(P.innerHTML=`<span>${r}</span>`),P}static getCheckoutLinks(o){return Ne(oe,o)}get isCheckoutLink(){return!0}get placeholder(){return this}clickHandler(o){var r;(r=je(this,X))==null||r.call(this,o)}async render(o={}){if(!this.isConnected)return!1;let r=C();if(!r)return!1;this.dataset.imsCountry||r.imsCountryPromise.then(c=>{c&&(this.dataset.imsCountry=c)},Z);let n=r.collectCheckoutOptions(o,this.placeholder);if(!n.wcsOsi.length)return!1;let i;try{i=JSON.parse(n.extraOptions??"{}")}catch(c){this.placeholder.log.error("cannot parse exta checkout options",c)}let s=this.placeholder.togglePending(n);this.href="";let l=r.resolveOfferSelectors(n),u=await Promise.all(l);u=u.map(c=>fe(c,n));let f=await r.buildCheckoutAction(u.flat(),{...i,...n});return this.renderOffers(u.flat(),n,{},f,s)}renderOffers(o,r,n={},i=void 0,s=void 0){if(!this.isConnected)return!1;let l=C();if(!l)return!1;if(r={...JSON.parse(this.placeholder.dataset.extraOptions??"null"),...r,...n},s??(s=this.placeholder.togglePending(r)),je(this,X)&&Ve(this,X,void 0),i){this.classList.remove(eo,to),this.placeholder.toggleResolved(s,o,r);let{url:f,text:c,className:p,handler:d}=i;return f&&(this.href=f),c&&(this.firstElementChild.innerHTML=c),p&&this.classList.add(...p.split(" ")),d&&(this.setAttribute("href","#"),Ve(this,X,d.bind(this))),!0}else if(o.length){if(this.placeholder.toggleResolved(s,o,r)){let f=l.buildCheckoutURL(o,r);return this.setAttribute("href",f),!0}}else{let f=new Error(`Not provided: ${r?.wcsOsi??"-"}`);if(this.placeholder.toggleFailed(s,f,r))return this.setAttribute("href","#"),!0}return!1}updateOptions(o={}){let r=C();if(!r)return!1;let{checkoutMarketSegment:n,checkoutWorkflow:i,checkoutWorkflowStep:s,entitlement:l,upgrade:u,modal:f,perpetual:c,promotionCode:p,quantity:d,wcsOsi:h}=r.collectCheckoutOptions(o);return Ie(this,{checkoutMarketSegment:n,checkoutWorkflow:i,checkoutWorkflowStep:s,entitlement:l,upgrade:u,modal:f,perpetual:c,promotionCode:p,quantity:d,wcsOsi:h}),!0}};X=new WeakMap,F(oe,"is","checkout-link"),F(oe,"tag","a");var wt=oe,Me=Re(wt);var or=[a.uk,a.au,a.fr,a.at,a.be_en,a.be_fr,a.be_nl,a.bg,a.ch_de,a.ch_fr,a.ch_it,a.cz,a.de,a.dk,a.ee,a.eg_ar,a.eg_en,a.es,a.fi,a.fr,a.gr_el,a.gr_en,a.hu,a.ie,a.it,a.lu_de,a.lu_en,a.lu_fr,a.nl,a.no,a.pl,a.pt,a.ro,a.se,a.si,a.sk,a.tr,a.ua,a.id_en,a.id_id,a.in_en,a.in_hi,a.jp,a.my_en,a.my_ms,a.nz,a.th_en,a.th_th],ro={INDIVIDUAL_COM:[a.za,a.lt,a.lv,a.ng,a.sa_ar,a.sa_en,a.za,a.sg,a.kr],TEAM_COM:[a.za,a.lt,a.lv,a.ng,a.za,a.co,a.kr],INDIVIDUAL_EDU:[a.lt,a.lv,a.sa_en,a.sea],TEAM_EDU:[a.sea,a.kr]},ne=class ne extends HTMLSpanElement{static get observedAttributes(){return["data-display-old-price","data-display-per-unit","data-display-recurrence","data-display-tax","data-perpetual","data-promotion-code","data-tax-exclusive","data-template","data-wcs-osi"]}static createInlinePrice(t){let o=C();if(!o)return null;let{displayOldPrice:r,displayPerUnit:n,displayRecurrence:i,displayTax:s,forceTaxExclusive:l,perpetual:u,promotionCode:f,quantity:c,template:p,wcsOsi:d}=o.collectPriceOptions(t);return be(ne,{displayOldPrice:r,displayPerUnit:n,displayRecurrence:i,displayTax:s,forceTaxExclusive:l,perpetual:u,promotionCode:f,quantity:c,template:p,wcsOsi:d})}static getInlinePrices(t){return Ne(ne,t)}get isInlinePrice(){return!0}get placeholder(){return this}resolveDisplayTaxForGeoAndSegment(t,o,r,n){let i=`${t}_${o}`;if(or.includes(t)||or.includes(i))return!0;let s=ro[`${r}_${n}`];return s?!!(s.includes(t)||s.includes(i)):!1}async resolveDisplayTax(t,o){let[r]=await t.resolveOfferSelectors(o),n=fe(await r,o);if(n?.length){let{country:i,language:s}=o,l=n[0],[u=""]=l.marketSegments;return this.resolveDisplayTaxForGeoAndSegment(i,s,l.customerSegment,u)}}async render(t={}){if(!this.isConnected)return!1;let o=C();if(!o)return!1;let r=o.collectPriceOptions(t,this.placeholder);if(!r.wcsOsi.length)return!1;let n=this.placeholder.togglePending(r);this.innerHTML="";let[i]=o.resolveOfferSelectors(r);return this.renderOffers(fe(await i,r),r,n)}renderOffers(t,o={},r=void 0){if(!this.isConnected)return;let n=C();if(!n)return!1;let i=n.collectPriceOptions({...this.dataset,...o});if(r??(r=this.placeholder.togglePending(i)),t.length){if(this.placeholder.toggleResolved(r,t,i))return this.innerHTML=n.buildPriceHTML(t,i),!0}else{let s=new Error(`Not provided: ${i?.wcsOsi??"-"}`);if(this.placeholder.toggleFailed(r,s,i))return this.innerHTML="",!0}return!1}updateOptions(t){let o=C();if(!o)return!1;let{displayOldPrice:r,displayPerUnit:n,displayRecurrence:i,displayTax:s,forceTaxExclusive:l,perpetual:u,promotionCode:f,quantity:c,template:p,wcsOsi:d}=o.collectPriceOptions(t);return Ie(this,{displayOldPrice:r,displayPerUnit:n,displayRecurrence:i,displayTax:s,forceTaxExclusive:l,perpetual:u,promotionCode:f,quantity:c,template:p,wcsOsi:d}),!0}};F(ne,"is","inline-price"),F(ne,"tag","span");var Ot=ne,Ue=Re(Ot);function nr({providers:e,settings:t},o){let r=S.module("checkout");function n(f,c){let{checkoutClientId:p,checkoutWorkflow:d,checkoutWorkflowStep:h,country:g,language:w,promotionCode:P,quantity:A}=t,{checkoutMarketSegment:k,checkoutWorkflow:T=d,checkoutWorkflowStep:b=h,imsCountry:R,country:y=R??g,language:N=w,quantity:j=A,entitlement:ie,upgrade:se,modal:De,perpetual:We,promotionCode:Ge=P,wcsOsi:Fe,extraOptions:de,...He}=Object.assign({},c?.dataset??{},f??{}),vt=Y(T,M,m.checkoutWorkflow),Ct=U.CHECKOUT;vt===M.V3&&(Ct=Y(b,U,m.checkoutWorkflowStep));let Lt=J({...He,extraOptions:de,checkoutClientId:p,checkoutMarketSegment:k,country:y,quantity:re(j,m.quantity),checkoutWorkflow:vt,checkoutWorkflowStep:Ct,language:N,entitlement:E(ie),upgrade:E(se),modal:E(De),perpetual:E(We),promotionCode:le(Ge).effectivePromoCode,wcsOsi:Te(Fe)});if(c)for(let ur of e.checkout)ur(c,Lt);return Lt}async function i(f,c){let p=C(),d=await o.getCheckoutAction?.(f,c,p.imsSignedInPromise);return d||null}function s(f,c){if(!Array.isArray(f)||!f.length||!c)return"";let{env:p,landscape:d}=t,{checkoutClientId:h,checkoutMarketSegment:g,checkoutWorkflow:w,checkoutWorkflowStep:P,country:A,promotionCode:k,quantity:T,...b}=n(c),R=window.frameElement?"if":"fp",y={checkoutPromoCode:k,clientId:h,context:R,country:A,env:p,items:[],marketSegment:g,workflowStep:P,landscape:d,...b};if(f.length===1){let[{offerId:N,offerType:j,productArrangementCode:ie}]=f,{marketSegments:[se]}=f[0];Object.assign(y,{marketSegment:se,offerType:j,productArrangementCode:ie}),y.items.push(T[0]===1?{id:N}:{id:N,quantity:T[0]})}else y.items.push(...f.map(({offerId:N},j)=>({id:N,quantity:T[j]??m.quantity})));return ze(w,y)}let{createCheckoutLink:l,getCheckoutLinks:u}=Me;return{CheckoutLink:Me,CheckoutWorkflow:M,CheckoutWorkflowStep:U,buildCheckoutAction:i,buildCheckoutURL:s,collectCheckoutOptions:n,createCheckoutLink:l,getCheckoutLinks:u}}function oo({interval:e=200,maxAttempts:t=25}={}){let o=S.module("ims");return new Promise(r=>{o.debug("Waing for IMS to be ready");let n=0;function i(){window.adobeIMS?.initialized?r():++n>t?(o.debug("Timeout"),r()):setTimeout(i,e)}i()})}function no(e){return e.then(()=>window.adobeIMS?.isSignedInUser()??!1)}function io(e){let t=S.module("ims");return e.then(o=>o?window.adobeIMS.getProfile().then(({countryCode:r})=>(t.debug("Got user country:",r),r),r=>{t.error("Unable to get user country:",r)}):null)}function ir({}){let e=oo(),t=no(e),o=io(t);return{imsReadyPromise:e,imsSignedInPromise:t,imsCountryPromise:o}}async function sr(e,t){return{}}function cr({literals:e,providers:t,settings:o}){function r(l,u){let{country:f,displayOldPrice:c,displayPerUnit:p,displayRecurrence:d,displayTax:h,forceTaxExclusive:g,language:w,promotionCode:P,quantity:A}=o,{displayOldPrice:k=c,displayPerUnit:T=p,displayRecurrence:b=d,displayTax:R=h,forceTaxExclusive:y=g,country:N=f,language:j=w,perpetual:ie,promotionCode:se=P,quantity:De=A,template:We,wcsOsi:Ge,...Fe}=Object.assign({},u?.dataset??{},l??{}),de=J({...Fe,country:N,displayOldPrice:E(k),displayPerUnit:E(T),displayRecurrence:E(b),displayTax:E(R),forceTaxExclusive:E(y),language:j,perpetual:E(ie),promotionCode:le(se).effectivePromoCode,quantity:re(De,m.quantity),template:We,wcsOsi:Te(Ge)});if(u)for(let He of t.price)He(u,de);return de}function n(l,u){if(!Array.isArray(l)||!l.length||!u)return"";let{template:f}=u,c;switch(f){case"discount":c=qt;break;case"strikethrough":c=Yt;break;case"optical":c=Vt;break;case"annual":c=Bt;break;default:c=u.promotionCode?jt:Ht}let p=r(u);p.literals=Object.assign({},e.price,J(u.literals??{}));let[d]=l;return d={...d,...d.priceDetails},c(p,d)}let{createInlinePrice:i,getInlinePrices:s}=Ue;return{InlinePrice:Ue,buildPriceHTML:n,collectPriceOptions:r,createInlinePrice:i,getInlinePrices:s}}function ar({settings:e}){let t=S.module("wcs"),{env:o,wcsApiKey:r}=e,n=new Map,i=new Map,s;async function l(c,p,d=!0){let h=ft;t.debug("Fetching:",c);try{c.offerSelectorIds=c.offerSelectorIds.sort();let g=new URL(e.wcsURL);g.searchParams.set("offer_selector_ids",c.offerSelectorIds.join(",")),g.searchParams.set("country",c.country),g.searchParams.set("locale",c.locale),g.searchParams.set("landscape",o===$.STAGE?"ALL":e.landscape),g.searchParams.set("api_key",r),c.language&&g.searchParams.set("language",c.language),c.promotionCode&&g.searchParams.set("promotion_code",c.promotionCode),c.currency&&g.searchParams.set("currency",c.currency);let w=await fetch(g.toString(),{credentials:"omit"});if(w.ok){let P=await w.json();t.debug("Fetched:",c,P);let A=P.resolvedOffers??[];A=A.map(Ee),p.forEach(({resolve:k},T)=>{let b=A.filter(({offerSelectorIds:R})=>R.includes(T)).flat();b.length&&(p.delete(T),k(b))})}else w.status===404&&c.offerSelectorIds.length>1?(t.debug("Multi-osi 404, fallback to fetch-by-one strategy"),await Promise.allSettled(c.offerSelectorIds.map(P=>l({...c,offerSelectorIds:[P]},p,!1)))):(h=Ae,t.error(h,c))}catch(g){h=Ae,t.error(h,c,g)}d&&p.size&&(t.debug("Missing:",{offerSelectorIds:[...p.keys()]}),p.forEach(g=>{g.reject(new Error(h))}))}function u(){clearTimeout(s);let c=[...i.values()];i.clear(),c.forEach(({options:p,promises:d})=>l(p,d))}function f({country:c,language:p,perpetual:d=!1,promotionCode:h="",wcsOsi:g=[]}){let w=`${p}_${c}`;c!=="GB"&&(p=d?"EN":"MULT");let P=[c,p,h].filter(A=>A).join("-").toLowerCase();return g.map(A=>{let k=`${A}-${P}`;if(!n.has(k)){let T=new Promise((b,R)=>{let y=i.get(P);if(!y){let N={country:c,locale:w,offerSelectorIds:[]};c!=="GB"&&(N.language=p),y={options:N,promises:new Map},i.set(P,y)}h&&(y.options.promotionCode=h),y.options.offerSelectorIds.push(A),y.promises.set(A,{resolve:b,reject:R}),y.options.offerSelectorIds.length>=e.wcsBufferLimit?u():(t.debug("Queued:",y.options),s||(s=setTimeout(u,e.wcsBufferDelay)))});n.set(k,T)}return n.get(k)})}return{WcsCommitment:at,WcsPlanType:lt,WcsTerm:ut,resolveOfferSelectors:f}}var x=class extends HTMLElement{get isWcmsCommerce(){return!0}};F(x,"instance"),F(x,"promise",null);window.customElements.define(H,x);async function so(e,t){let o=S.init(e.env).module("service");o.debug("Activating:",e);let r={price:{}},n=Object.freeze(yt(e));try{r.price=await sr(n,e.commerce.priceLiterals)}catch(u){o.warn("Price literals were not fetched:",u)}let i={checkout:new Set,price:new Set},s=document.createElement(H),l={literals:r,providers:i,settings:n};return x.instance=Object.defineProperties(s,Object.getOwnPropertyDescriptors({...nr(l,t),...ir(l),...cr(l),...ar(l),...Et,Log:S,get defaults(){return m},get literals(){return r},get log(){return S},get providers(){return{checkout(u){return i.checkout.add(u),()=>i.checkout.delete(u)},price(u){return i.price.add(u),()=>i.price.delete(u)}}},get settings(){return n}})),o.debug("Activated:",{literals:r,settings:n,element:s}),document.head.append(s),B(()=>{let u=new CustomEvent(te,{bubbles:!0,cancelable:!1,detail:x.instance});x.instance.dispatchEvent(u)}),x.instance}function lr(){document.head.querySelector(H)?.remove(),x.promise=null,S.reset()}function Tt(e,t){let o=V(e)?e():null,r=V(t)?t():{};return o&&(r.force&&lr(),so(o,r).then(n=>{Tt.resolve(n)})),x.promise??(x.promise=new Promise(n=>{Tt.resolve=n})),x.promise}export{Me as CheckoutLink,M as CheckoutWorkflow,U as CheckoutWorkflowStep,m as Defaults,Ue as InlinePrice,z as Landscape,S as Log,H as TAG_NAME_SERVICE,at as WcsCommitment,lt as WcsPlanType,ut as WcsTerm,Ee as applyPlanType,Kt as getLocaleSettings,yt as getSettings,Tt as init,lr as reset};
