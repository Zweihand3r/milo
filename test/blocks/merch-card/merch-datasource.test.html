<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>merch-datasource web Component test page</title>
  <style>
  </style>
</head>

<body>
  <script type="module" >
    import { runTests } from '@web/test-runner-mocha';
    import { expect } from '@esm-bundle/chai';
    import sinon from 'sinon';
    import { setConfig } from '../../../../libs/utils/utils.js';
    import { mockFetch, unmockFetch } from '../merch/mocks/fetch.js';
    import { mockIms, unmockIms } from '../merch/mocks/ims.js';
    import "../../../libs/features/spectrum-web-components/dist/theme.js";
    import "../../../libs/features/spectrum-web-components/dist/button.js";
    import { init } from "../../../libs/deps/commerce.js";
    import "../../../libs/deps/merch-card.js";
    import "../../../libs/blocks/merch-card/merch-datasource.js";

    const config = {
      codeRoot: '/libs',
      imsClientId: 'test_client_id',
    };
    setConfig(config);

    runTests(async () => {
      describe('Merch Datasource', async () => {
        before(async () => {
          mockIms();
          await mockFetch();
          await init(() => ({
            env: 'PRODUCTION',
            locale: 'en_US',
          }));
        });

        after(async () => {
          unmockIms();
          await unmockFetch();
        });
        it('fetches card from odin', async () => {
          const content = document.getElementById('odin').content.cloneNode(true);
          document.querySelector('main').appendChild(content);
          expect(false).to.be.true;
        });
      });

    });
  </script>
  <main>
  </main>
    <template id="odin">
      <sp-theme theme="spectrum" color="light" scale="medium">
        <div class="four-merch-cards catalog">
          <merch-card variant="catalog">
            <merch-datasource path="/content/dam/sandbox/ilyas/photoshop"></merch-datasource>
          </merch-card>
        </div>
      </sp-theme>
    </template>
</body>

</html>
